<!DOCTYPE html>
<html lang="en"><head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="twitter:card" content="summary_large_image" /><!-- Begin Jekyll SEO tag v2.6.1 -->
<title>Installation of Scanpy on a Mac M1 | Braza Faouzi</title>
<meta name="generator" content="Jekyll v4.1.1" />
<meta property="og:title" content="Installation of Scanpy on a Mac M1" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="Here a short article to provide some reminders about how to install Scanpy on your Mac M1. For managing my environments I use poetry, conda or pipenv. Unfortunately I did not find manage to install Scanpy via pip depedent package managers (both pipenv or poetry do not work). The only alternative that worked is withconda. To be complete there are some dependencies and configurations that need to be set first." />
<meta property="og:description" content="Here a short article to provide some reminders about how to install Scanpy on your Mac M1. For managing my environments I use poetry, conda or pipenv. Unfortunately I did not find manage to install Scanpy via pip depedent package managers (both pipenv or poetry do not work). The only alternative that worked is withconda. To be complete there are some dependencies and configurations that need to be set first." />
<link rel="canonical" href="https://fbraza.github.io/BrazLog/python/devops/single-cell/2022/02/10/install-scanpy.html" />
<meta property="og:url" content="https://fbraza.github.io/BrazLog/python/devops/single-cell/2022/02/10/install-scanpy.html" />
<meta property="og:site_name" content="Braza Faouzi" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2022-02-10T00:00:00-06:00" />
<script type="application/ld+json">
{"url":"https://fbraza.github.io/BrazLog/python/devops/single-cell/2022/02/10/install-scanpy.html","@type":"BlogPosting","headline":"Installation of Scanpy on a Mac M1","dateModified":"2022-02-10T00:00:00-06:00","datePublished":"2022-02-10T00:00:00-06:00","mainEntityOfPage":{"@type":"WebPage","@id":"https://fbraza.github.io/BrazLog/python/devops/single-cell/2022/02/10/install-scanpy.html"},"description":"Here a short article to provide some reminders about how to install Scanpy on your Mac M1. For managing my environments I use poetry, conda or pipenv. Unfortunately I did not find manage to install Scanpy via pip depedent package managers (both pipenv or poetry do not work). The only alternative that worked is withconda. To be complete there are some dependencies and configurations that need to be set first.","@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->
<link rel="stylesheet" href="/BrazLog/assets/css/style.css"><link type="application/atom+xml" rel="alternate" href="https://fbraza.github.io/BrazLog/feed.xml" title="Braza Faouzi" /><link rel="shortcut icon" type="image/x-icon" href="/BrazLog/images/favicon.ico"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/Primer/15.2.0/primer.css" integrity="sha512-xTz2ys4coGAOz8vuV1NcQBkgVmKhsSEtjbqyMJbBHRplFuvKIUo6xhLHpAyPt9mfR6twHJgn9OgVLuqOvjeBhg==" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.14.0/css/all.min.css" integrity="sha512-1PKOgIY59xJ8Co8+NE6FZ+LOAZKjy+KY8iq0G4B3CyeY6wYHN3yt9PW0XpSriVlkMXe40PTKnXrLnZ9+fkDaog==" crossorigin="anonymous" />

<script>
function wrap_img(fn) {
    if (document.attachEvent ? document.readyState === "complete" : document.readyState !== "loading") {
        var elements = document.querySelectorAll(".post img");
        Array.prototype.forEach.call(elements, function(el, i) {
            if (el.getAttribute("title") && (el.className != "emoji")) {
                const caption = document.createElement('figcaption');
                var node = document.createTextNode(el.getAttribute("title"));
                caption.appendChild(node);
                const wrapper = document.createElement('figure');
                wrapper.className = 'image';
                el.parentNode.insertBefore(wrapper, el);
                el.parentNode.removeChild(el);
                wrapper.appendChild(el);
                wrapper.appendChild(caption);
            }
        });
    } else { document.addEventListener('DOMContentLoaded', fn); }
}
window.onload = wrap_img;
</script>

<script>
    document.addEventListener("DOMContentLoaded", function(){
    // add link icon to anchor tags
    var elem = document.querySelectorAll(".anchor-link")
    elem.forEach(e => (e.innerHTML = '<i class="fas fa-link fa-xs"></i>'));
    });
</script>
</head>
<body><header class="site-header">

  <div class="wrapper"><a class="site-title" rel="author" href="/BrazLog/">Braza Faouzi</a><nav class="site-nav">
        <input type="checkbox" id="nav-trigger" class="nav-trigger" />
        <label for="nav-trigger">
          <span class="menu-icon">
            <svg viewBox="0 0 18 15" width="18px" height="15px">
              <path d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.032C17.335,0,18,0.665,18,1.484L18,1.484z M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.032C17.335,6.031,18,6.696,18,7.516L18,7.516z M18,13.516C18,14.335,17.335,15,16.516,15H1.484 C0.665,15,0,14.335,0,13.516l0,0c0-0.82,0.665-1.483,1.484-1.483h15.032C17.335,12.031,18,12.695,18,13.516L18,13.516z"/>
            </svg>
          </span>
        </label>

        <div class="trigger"><a class="page-link" href="/BrazLog/about/">About Me</a><a class="page-link" href="/BrazLog/search/">Search</a><a class="page-link" href="/BrazLog/categories/">Tags</a></div>
      </nav></div>
</header>
<main class="page-content" aria-label="Content">
      <div class="wrapper">
        <article class="post h-entry" itemscope itemtype="http://schema.org/BlogPosting">

  <header class="post-header">
    <h1 class="post-title p-name" itemprop="name headline">Installation of Scanpy on a Mac M1</h1><p class="post-meta post-meta-title"><time class="dt-published" datetime="2022-02-10T00:00:00-06:00" itemprop="datePublished">
        Feb 10, 2022
      </time>
       • <span class="read-time" title="Estimated read time">
    
    
      1 min read
    
</span></p>

    
      <p class="category-tags"><i class="fas fa-tags category-tags-icon"></i></i> 
      
        <a class="category-tags-link" href="/BrazLog/categories/#Python">Python</a>
        &nbsp;
      
        <a class="category-tags-link" href="/BrazLog/categories/#DevOps">DevOps</a>
        &nbsp;
      
        <a class="category-tags-link" href="/BrazLog/categories/#single-cell">single-cell</a>
        
      
      </p>
    

    </header>

  <div class="post-content e-content" itemprop="articleBody">
    <p>Here a short article to provide some reminders about how to install Scanpy on your Mac M1. For managing my environments I use <code class="language-plaintext highlighter-rouge">poetry</code>, <code class="language-plaintext highlighter-rouge">conda</code> or <code class="language-plaintext highlighter-rouge">pipenv</code>. Unfortunately I did not find manage to install Scanpy via <code class="language-plaintext highlighter-rouge">pip</code> depedent package managers (both <code class="language-plaintext highlighter-rouge">pipenv</code> or <code class="language-plaintext highlighter-rouge">poetry</code> do not work). The only alternative that worked is with<code class="language-plaintext highlighter-rouge">conda</code>. To be complete there are some dependencies and configurations that need to be set first.</p>

<h2 id="hdf5">HDF5</h2>

<p>You first need to install <code class="language-plaintext highlighter-rouge">hfd5</code>. It is a high performance data software library and file format to manage, process, and store your heterogeneous data. HDF5 is built for fast I/O processing and storage. Scanpy can read and store AnnData object as <code class="language-plaintext highlighter-rouge">h5ad</code> files taht <code class="language-plaintext highlighter-rouge">hdf5</code> files with some additional structure specifying how to store AnnData objects. To install it you will need homebrew on your Mac M1 machine.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>brew <span class="nb">install </span>hdf5
<span class="nb">export </span><span class="nv">HDF5_DIR</span><span class="o">=</span>/opt/homebrew/Cellar/hdf5/1.12.1 <span class="c"># use the version you have</span>
</code></pre></div></div>

<h2 id="llvmlite">LLVMLITE</h2>

<p>Next install <code class="language-plaintext highlighter-rouge">llvmlite</code> with homebrew. <code class="language-plaintext highlighter-rouge">llvmlite</code> provides a Python binding to LLVM for use in Numba that translates a subset of Python and NumPy code into fast machine code. It is extensively used in Scanpy given its dependency to numpy and scikit-learn.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>brew <span class="nb">install </span>llvm@11
</code></pre></div></div>

<p>Make sure <code class="language-plaintext highlighter-rouge">/opt/homebrew/opt/llvm@11/bin</code> is in your path. For that edit the <code class="language-plaintext highlighter-rouge">/etc/paths</code> to add this path. Next install <code class="language-plaintext highlighter-rouge">llvmlite</code> in your python environment.</p>

<h2 id="conda">Conda</h2>

<p>I recommend installing Miniconda. Miniconda is essentially an installer for an empty conda environment, containing only Conda, its dependencies, and Python.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>conda config <span class="nt">--add</span> channels defaults
conda config <span class="nt">--add</span> channels bioconda
conda config <span class="nt">--add</span> channels conda-forge
conda config <span class="nt">--set</span> offline <span class="nb">false</span>
</code></pre></div></div>

<p>Once done, you can install <code class="language-plaintext highlighter-rouge">scanpy</code> in your machine.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>conda <span class="nb">install </span>scanpy
</code></pre></div></div>

<h2 id="conclusion">Conclusion</h2>

<p>It was a short one, but it will be, for sure, a good reminder for my future <code class="language-plaintext highlighter-rouge">scanpy</code> projects when working in a Mac M1. I hope that in the future these issues will be solved. In the mean time I still use my Linux computer when I need to deal with Scanpy. There everything works out of the box with classical <code class="language-plaintext highlighter-rouge">pip install</code>.</p>

  </div><!-- from https://github.com/utterance/utterances -->
<script src="https://utteranc.es/client.js"
        repo="fbraza/BrazLog"
        issue-term="title"
        label="blogpost-comment"
        theme="github-light"
        crossorigin="anonymous"
        async>
</script><a class="u-url" href="/BrazLog/python/devops/single-cell/2022/02/10/install-scanpy.html" hidden></a>
</article>
      </div>
    </main><footer class="site-footer h-card">
  <data class="u-url" href="/BrazLog/"></data>

  <div class="wrapper">

    <div class="footer-col-wrapper">
      <div class="footer-col">
        <p class="feed-subscribe">
          <a href="/BrazLog/feed.xml">
            <svg class="svg-icon orange">
              <use xlink:href="/BrazLog/assets/minima-social-icons.svg#rss"></use>
            </svg><span>Subscribe</span>
          </a>
        </p>
      </div>
      <div class="footer-col">
        <p>Python · Scala · BigData · System Design · Data Engineering</p>
      </div>
    </div>

    <div class="social-links"><ul class="social-media-list"><li><a rel="me" href="https://github.com/fbraza" target="_blank" title="fbraza"><svg class="svg-icon grey"><use xlink:href="/BrazLog/assets/minima-social-icons.svg#github"></use></svg></a></li><li><a rel="me" href="https://twitter.com/%40braza_faouzi" target="_blank" title="@braza_faouzi"><svg class="svg-icon grey"><use xlink:href="/BrazLog/assets/minima-social-icons.svg#twitter"></use></svg></a></li></ul>
</div>

  </div>

</footer>
</body>

</html>
